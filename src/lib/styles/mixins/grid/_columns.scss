@use 'sass:math';
@use 'sass:map';

@use '../../variables' as *;
@use '../breakpoints' as *;

/* Generates classes for columns, with their respective breakpoint in the name, i.e. .col-md- */
@mixin makeGridColumns($columns: $grid-columns, $gutter: $grid-gutter-width, $breakpoints: $grid-breakpoints) {
  @each $breakpoint in map.keys($breakpoints) {
    $name: breakpointName($breakpoint, $grid-breakpoints);

    @include media-breakpoint-up($breakpoint, $breakpoints) {

      .col#{$name} {
        flex: 1 0 0;
      }

      .col#{$name}-auto {
        @include makeColAuto();
      }

      @if $columns > 0 {
        @for $i from 1 through $grid-columns {
          .col#{$name}-#{$i} {
            @include makeCol($i, $grid-columns);
          }
        }
      }
    }
  }
}

@mixin makeColReady() {
  flex-shrink: 0;
  width: 100% !important;
  max-width: 100%;
  padding-left: $grid-gutter-width;
  padding-right: $grid-gutter-width;
}

@mixin makeCol($size: false, $columns: $grid-columns) {
  @if $size {
    flex: 0 0 auto;
    width: math.percentage(calc($size / $columns)) !important;
  } @else {
    flex: 1 1 0;
    max-width: 100%;
  }
}

@mixin makeColAuto() {
  flex: 0 0 auto;
  width: auto !important;
}
